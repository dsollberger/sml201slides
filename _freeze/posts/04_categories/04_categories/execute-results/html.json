{
  "hash": "d222ab53c6f8da30726a86997652bc03",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"4: Categories\"\nauthor: \"Derek Sollberger\"\ndate: \"2024-09-12\"\n# format:\n#   revealjs:\n#     scrollable: true\nformat:\n  html:\n    toc: true\n---\n\n::: {.cell}\n\n:::\n\n\n# SML 201\n\n## Start\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n* **Goal**: Explore data wrangling with categorical variables\n\n* **Objective**: Compute counts, make bar graphs, and discuss data\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"45%\"}\n![demographics survey](short_names.png)\n:::\n\n::::\n\n# Demographics Survey\n\n## Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_df <- readr::read_csv(\"https://raw.githubusercontent.com/dsollberger/sml201slides/main/posts/04_categories/sml201survey.csv\")\n```\n:::\n\n\n\n## Queries\n\n:::: {.columns}\n\n::: {.column width=\"20%\"}\nFor the *Demographics Survey*, here are the variable names that represent the responses to the survey questions.\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"70%\"}\n![demographics survey](short_names.png)\n:::\n\n::::\n\n## Example: Ocean or Snow?\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_df |>\n  filter(!is.na(oceanSnow)) |>\n  ggplot(aes(x = oceanSnow)) +\n  geom_bar(aes(fill = oceanSnow),\n           color = \"black\",\n           stat = \"count\")\n```\n\n::: {.cell-output-display}\n![](04_categories_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## Example: Campus Safety\n\nOn a scale from 0 to 100---with 0 = very anxious and 100 = comfortable---how safe do you feel on campus? \n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(demo_df$safety)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n   2.00   80.00   90.00   87.16   97.25  100.00       5 \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_df |>\n  ggplot(aes(x = safety)) +\n  geom_histogram(binwidth = 5)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 5 rows containing non-finite outside the scale range\n(`stat_bin()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04_categories_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_df |>\n  ggplot(aes(x = safety, group = gender)) +\n  geom_density(aes(fill = gender),\n               alpha = 0.5)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 5 rows containing non-finite outside the scale range\n(`stat_density()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04_categories_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_df |>\n  ggplot(aes(x = gender, y = safety)) +\n  geom_boxplot()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 5 rows containing non-finite outside the scale range\n(`stat_boxplot()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04_categories_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n## Example: Flossing\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(demo_df$flossing)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n  0.000   2.000   5.000   5.224   7.000  14.000      10 \n```\n\n\n:::\n:::\n\n\n## Example: Football\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_df |>\n  select(football) |>\n  separate_longer_delim(football, delim = \",\") |>\n  count(football) |>\n  arrange(desc(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 29 × 2\n   football                 n\n   <chr>                <int>\n 1 <NA>                    40\n 2 New York Giants         14\n 3 Philadelphia Eagles     13\n 4 San Francisco 49ers     11\n 5 Dallas Cowboys           7\n 6 Buffalo Bills            6\n 7 Houston Texas            6\n 8 New England Patriots     6\n 9 Arizona Cardinals        5\n10 New York Jets            5\n# ℹ 19 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_df |>\n  select(baseball) |>\n  separate_longer_delim(baseball, delim = \",\") |>\n  count(baseball) |>\n  arrange(desc(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 28 × 2\n   baseball                  n\n   <chr>                 <int>\n 1 <NA>                     49\n 2 New York Yankees         16\n 3 Boston Red Sox           11\n 4 New York Mets            11\n 5 Philadelphia Phillies    11\n 6 Los Angeles Dodgers       8\n 7 Arizona Diamondbacks      4\n 8 Houston Astros            4\n 9 Miami Marlins             4\n10 San Franciso Giants       4\n# ℹ 18 more rows\n```\n\n\n:::\n:::\n\n\n## Example: Sleep\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n## Example: Residential Colleges\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n\n# Quo Vadimus?\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n* Assignments:\n\n    * Precept 2\n    * Group Membership\n    \n* Project 1:\n\n    * assigned: Sept 23\n    * due: Oct 2\n    \n* Exam 1: Oct 10\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\"The first [lesson] was always to make the choice to learn.  That meant embracing change and mustering the courage to fail; success and failure are two sides of the same coin.  You cannot succeed if at some point you haven't failed\" --- Maria Ressa\n\n:::\n\n::::\n\n\n# Footnotes\n\n::: {.callout-note collapse=\"true\"}\n## (optional) How the data set was cleaned and anonymized\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_raw <- readr::read_csv(\"Demographics Survey Survey Student Analysis Report.csv\")\n\nshort_names <- c(\"timestamp\", \"currentCourse\", \"statsBefore\", \"classStanding\",\n                 \"numCourses\", \"major\",\n                 \"minor1\", \"minor2\", \"residentialCollege\", \"GPA\", \"gender\",\n                 \"ethnicity\", \"hoursStudying\", \"birthMonth\", \"age\", \"height\",\n                 \"shoeSize\", \"weight\", \"calories\", \"hoursExercise\", \"sleepTime\",\n                 \"sleepDuration\", \"socialMedia\", \"smartPhones\", \"baseball\", \"football\",\n                 \"basketball\", \"hockey\", \"politics\", \"religous\", \"Kinsey\",\n                 \"happyCampus\", \"happyCity\", \"anxiousCourse\", \"highSchool\", \"prepared\",\n                 \"drugUse\", \"firstGeneration\", \"languages\", \"safety\", \"makingFriends\",\n                 \"campusTeam\", \"officeHours\", \"studyGroups\", \"retirement\", \"happiness\",\n                 \"intelligence\", \"attractiveness\", \"favColor\", \"favNumber\", \"showers\",\n                 \"brushing\", \"flossing\", \"washHair\", \"finAidInfluence\", \"futureCareer\",\n                 \"numSiblings\", \"favMovie\", \"loneliness\", \"tidyness\", \"highSchoolGPA\",\n                 \"SAT\", \"activeCampus\", \"numFriends\", \"studyMusic\", \"familyInfluence\",\n                 \"campusLiving\", \"jobBool\", \"campusGroups\", \"attendance\", \"pancakesWaffles\",\n                 \"coffeeTea\", \"dogsCats\", \"oceanSnow\", \"pineapplePizza\", \"campusAcceptance\",\n                 \"hoursSocialMedia\", \"continents\", \"superhero\", \"supervillain\", \"season\",\n                 \"handedness\", \"safety2\", \"laundry\", \"favClass\", \"favProfessor\", \n                 \"anxiousSurvey\")\n\ndemo_df <- demo_raw |>\n  # remove student names and Canvas metadeta\n  select(seq(7,179,2)) |>\n  \n  # apply short column names (i.e. ease programming)\n  setNames(short_names) |>\n  \n  # shuffle all rows (i.e. no longer alphabetical by student name)\n  sample_frac(1.0) |>\n  \n  # mask majors who are underrepresented\n  group_by(major) |>\n  mutate(majorCount = n()) |>\n  ungroup() |>\n  mutate(major = ifelse(majorCount >= 3, major, \"other\")) |>\n  select(-majorCount) |>\n  \n  # remove other possible ID factors\n  select(-c(ethnicity, minor1, minor2)) |>\n  mutate(age = ifelse(age < 18 | age > 21, NA, age))\n\nreadr::write_csv(demo_df, \"sml201survey.csv\")\n```\n:::\n\n\n:::\n\n::: {.callout-note collapse=\"true\"}\n\n## (optional) Additional Resources\n\n* Colors: [useful glossary](http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf) by Dr Ying Wei\n* a great [blog post](https://blog.albertkuo.me/post/2022-01-04-reordering-geom-col-and-geom-bar-by-count-or-value/) about the `forcats` package by Albert Kuo\n\n:::\n\n::: {.callout-note collapse=\"true\"}\n## Session Info\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.0 (2024-04-24 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 10 x64 (build 19045)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4    \n [5] purrr_1.0.2     readr_2.1.5     tidyr_1.3.1     tibble_3.2.1   \n [9] ggplot2_3.5.1   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] bit_4.0.5         archive_1.1.8     gtable_0.3.5      jsonlite_1.8.8   \n [5] crayon_1.5.3      compiler_4.4.0    tidyselect_1.2.1  parallel_4.4.0   \n [9] scales_1.3.0      yaml_2.3.8        fastmap_1.2.0     R6_2.5.1         \n[13] labeling_0.4.3    generics_0.1.3    knitr_1.48        htmlwidgets_1.6.4\n[17] munsell_0.5.1     pillar_1.9.0      tzdb_0.4.0        rlang_1.1.4      \n[21] utf8_1.2.4        stringi_1.8.4     xfun_0.44         bit64_4.0.5      \n[25] timechange_0.3.0  cli_3.6.2         withr_3.0.1       magrittr_2.0.3   \n[29] digest_0.6.35     grid_4.4.0        vroom_1.6.5       rstudioapi_0.16.0\n[33] hms_1.1.3         lifecycle_1.0.4   vctrs_0.6.5       evaluate_0.24.0  \n[37] glue_1.7.0        farver_2.1.2      fansi_1.0.6       colorspace_2.1-1 \n[41] rmarkdown_2.27    tools_4.4.0       pkgconfig_2.0.3   htmltools_0.5.8.1\n```\n\n\n:::\n:::\n\n:::\n\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\n:::\n\n::::\n\n:::: {.panel-tabset}\n\n\n\n::::",
    "supporting": [
      "04_categories_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}