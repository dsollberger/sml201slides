{
  "hash": "7473233a5922a1a71807e32ea4b52918",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"17: Hypothesis Testing (2)\"\nauthor: \"Derek Sollberger\"\ndate: \"2024-11-7\"\nformat:\n  html:\n    toc: true\n    theme: cerulean\n---\n\n\n\n# SML 201\n\n::: {.callout-note collapse=\"true\"}\n## Libraries and Helper Functions\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"ggsignif\")   #put significance \"stars\" on boxplots\nlibrary(\"infer\")      #pipeline workflow for hypothesis testing\nlibrary(\"janitor\")    #compute proportions easily\nlibrary(\"moderndive\") #textbook's package and data\nlibrary(\"patchwork\")  #easily let's me show graphs side-by-side\nlibrary(\"tidyverse\")  #the overall programming style universe\n\n# school colors\nprinceton_orange <- \"#E77500\"\nprinceton_black  <- \"#121212\"\n\n# data set: SML 201 demographics survey\n# demo_df <- readr::read_csv(\"https://raw.githubusercontent.com/dsollberger/sml201slides/main/posts/04_categories/sml201survey.csv\")\ndemo_df <- readr::read_csv(\"sml201survey.csv\")\n\n# helper function\nvnorm <- function(x, mu = 0, sigma = 1, section = \"lower\"){\n  \n  # bell curve\n  x_vals <- seq(mu - 4*sigma, mu + 4*sigma, length.out = 201)\n  y_vals <- dnorm(x_vals, mu, sigma)\n  df_for_graph <- data.frame(x_vals, y_vals)\n\n  # outline shaded regions\n  if(length(x) == 1){\n    shade_left <- rbind(c(x[1],0), df_for_graph |>\n                        filter(x_vals < x[1]))\n    shade_right <- rbind(c(x[1],0), df_for_graph |>\n                        filter(x_vals > x[1]))\n  }\n  if(length(x) == 2){\n    shade_between <- rbind(c(x[1],0),\n                       df_for_graph |>\n                         filter(x_vals > x[1] &\n                                  x_vals < x[2]),\n                       c(x[2],0))\n    shade_tails <- rbind(df_for_graph |>\n                        filter(x_vals < x[1]),\n                     c(x[1],0),\n                     c(x[2],0),\n                     df_for_graph |>\n                        filter(x_vals > x[2]))\n  }\n  if(section == \"lower\"){\n    bell_curve <- df_for_graph |>\n      ggplot(aes(x_vals, y_vals)) +\n      geom_polygon(aes(x = x_vals, y = y_vals),\n                   data = shade_left,\n                   fill = \"#E77500\",) +\n      geom_line(color = \"gray50\", linewidth = 2)\n    prob_val <- round(pnorm(x,mu,sigma), 4)\n  }\n  if(section == \"upper\"){\n    bell_curve <- df_for_graph |>\n      ggplot(aes(x_vals, y_vals)) +\n      geom_polygon(aes(x = x_vals, y = y_vals),\n                   data = shade_right,\n                   fill = \"#E77500\",) +\n      geom_line(color = \"gray50\", linewidth = 2)\n    prob_val <- 1 - round(pnorm(x,mu,sigma), 4)\n  }\n  if(section == \"between\"){\n    bell_curve <- df_for_graph |>\n      ggplot(aes(x_vals, y_vals)) +\n      geom_polygon(aes(x = x_vals, y = y_vals),\n                   data = shade_between,\n                   fill = \"#E77500\",) +\n      geom_line(color = \"gray50\", linewidth = 2)\n    prob_val <- round(diff(pnorm(x,mu,sigma)), 4)\n  }\n  if(section == \"tails\"){\n    bell_curve <- df_for_graph |>\n      ggplot(aes(x_vals, y_vals)) +\n      geom_polygon(aes(x = x_vals, y = y_vals),\n                   data = shade_tails,\n                   fill = \"#E77500\",) +\n      geom_line(color = \"gray50\", linewidth = 2)\n    prob_val <- round(1 - diff(pnorm(x,mu,sigma)), 4)\n  }\n  \n  # plot bell curve\n  bell_curve + \n    labs(subtitle = paste0(\"Probability: \", prob_val),\n         caption = \"SML 201\", y = \"\") +\n    theme_minimal()\n}\n```\n:::\n\n\n\n:::\n\n## Start\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n* **Goal**: Continue to explore hypothesis testing and two-sided tests\n\n* **Objective**: Get \"stars\" and significance levels\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"40%\"}\n![Fry](Fry_coffee.png)\n:::\n\n::::\n\n\n# Case Study: GPA vs Beverage\n\n* Colloquially: Coffee and tea drinkers have *different* GPAs (grade point averages)\n* Null hypothesis: Coffee and tea drinkers have the *same* GPA\n* Alternative hypothesis: Coffee and tea drinkers have *different* GPAs\n\n$$H_{o}: \\mu_{c} = \\mu_{t}$$\n$$H_{a}: \\mu_{c} \\neq \\mu_{t}$$\n\n## Survey Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(demo_df$GPA)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n  0.000   3.406   3.600   3.547   3.800   4.650      13 \n```\n\n\n:::\n:::\n\n\n\n## Clean Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_long <- demo_df |>\n  select(GPA, coffeeTea) |>\n  filter(GPA > 0 & GPA <= 4.0) |>\n  drop_na()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_long |>\n  group_by(coffeeTea) |>\n  summarize(xbar = mean(GPA))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 2\n  coffeeTea  xbar\n  <chr>     <dbl>\n1 (neither)  3.63\n2 coffee     3.57\n3 tea        3.55\n```\n\n\n:::\n:::\n\n\n\n## Boxplot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_long |>\n  filter(coffeeTea %in% c(\"coffee\", \"tea\")) |>\n  ggplot(aes(x = coffeeTea, y = GPA)) +\n  geom_boxplot(color = princeton_black, fill = princeton_orange) +\n  labs(title = \"Does Beverage Choice affect GPA?\",\n       subtitle = \"(toward two-means hypothesis testing)\",\n       caption = \"SML 201\",\n       x = \"beverage\", y = \"grade point average\") +\n  theme_minimal(base_size = 16)\n```\n\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n::: {.callout-tip collapse=\"true\"}\n## Intuition\n\nThe boxplot visualization lets us guess at whether or not the means for the two groups are *significantly* different (or not).\n:::\n\n\n# Modern Approach (infer)\n\n## Null Distribution\n\nIn the modern approach, with the `infer` code package, we build a null distribution (i.e. assuming the same GPA for coffee and tea drinkers).\n\n::: {.callout-note collapse=\"true\"}\n## Permutation Test\n\nIf the beverage choice here did not affect GPA, then it shouldn't matter if we permute the \"coffee\" or \"tea\" labels.\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution <- demo_long |>\n  filter(coffeeTea %in% c(\"coffee\", \"tea\")) |>\n  specify(formula = GPA ~ coffeeTea) |>\n  hypothesize(null = \"independence\") |>\n  generate(reps = 1000, type = \"permute\") |>\n  calculate(stat = \"diff in means\", order = c(\"coffee\", \"tea\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nobs_diff <- demo_long |>\n  filter(coffeeTea %in% c(\"coffee\", \"tea\")) |>\n  specify(formula = GPA ~ coffeeTea) |>\n  # hypothesize(null = \"independence\") |>\n  # generate(reps = 1000, type = \"permute\") |>\n  calculate(stat = \"diff in means\", order = c(\"coffee\", \"tea\"))\n```\n:::\n\n\n\n## Visualization\n\n::: {.callout-tip}\n## p-value\n\n\"The **p-value** is the probability of obtaining a test statistic just as extreme or more extreme than the observed test statistic assuming the null hypothesis $H_0$ is true\"\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution |>\n  visualize() +\n  labs(title = \"Does Beverage Affect GPA?\",\n       subtitle = \"Two-Sided Hypothesis Test\",\n       caption = \"SML 201\",\n       x = \"difference between coffee and tea drinkers\") +\n  shade_p_value(obs_diff, direction = \"two-sided\",\n                color = princeton_black, fill = princeton_orange) +\n  theme_minimal(base_size = 16)\n```\n\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n::: {.callout-note}\n## Two-Sided\n\nSince our p-value search looks at both tails of the null distribution, we call this a *two-sided* test.\n:::\n\n\n## Conclusion\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution |> get_p_value(obs_diff, direction = \"two-sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1   0.676\n```\n\n\n:::\n:::\n\n\n\n::: {.callout-warning}\n## Inconclusive\n\nSince the p-value > 0.05, we have *failed to reject the null hypothesis* that the GPA for coffee and tea drinkers are the same (at the $\\alpha = 0.05$ significance level).\n\nWe may treat this result as inconclusive or note that we have not found evidence here toward showing that beverage choice affects GPA attainment.\n:::\n\n\n# Case Study: Colleges and Flossing\n\n$$H_{o}: \\mu_{\\tiny\\text{NCW}} = \\mu_{\\tiny\\text{Rockefeller}}$$\n$$H_{a}: \\mu_{\\tiny\\text{NCW}} \\neq \\mu_{\\tiny\\text{Rockefeller}}$$\n\n\n## Boxplot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_long <- demo_df |>\n  select(residentialCollege, flossing) |>\n  drop_na()\n\ndemo_long |>\n  filter(residentialCollege %in% c(\"New College West\", \"Rockefeller\")) |>\n  ggplot(aes(x = residentialCollege, y = flossing)) +\n  geom_boxplot(color = princeton_black, fill = princeton_orange) +\n  labs(title = \"Does Residential College affect Flossing Frequency?\",\n       subtitle = \"(toward two-means hypothesis testing)\",\n       caption = \"SML 201\",\n       x = \"\", y = \"times flossing per week\") +\n  theme_minimal(base_size = 16)\n```\n\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n## Permutation Test\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution <- demo_long |>\n  filter(residentialCollege %in% c(\"New College West\", \"Rockefeller\")) |>\n  specify(formula = flossing ~ residentialCollege) |>\n  hypothesize(null = \"independence\") |>\n  generate(reps = 1000, type = \"permute\") |>\n  calculate(stat = \"diff in means\", order = c(\"New College West\", \"Rockefeller\"))\n\nobs_diff <- demo_long |>\n  filter(residentialCollege %in% c(\"New College West\", \"Rockefeller\")) |>\n  specify(formula = flossing ~ residentialCollege) |>\n  # hypothesize(null = \"independence\") |>\n  # generate(reps = 1000, type = \"permute\") |>\n  calculate(stat = \"diff in means\", order = c(\"New College West\", \"Rockefeller\"))\n\nnull_distribution |>\n  visualize() +\n  labs(title = \"Does Living Location Affect Flossing Rate?\",\n       subtitle = \"Two-Sided Hypothesis Test\",\n       caption = \"SML 201\",\n       x = \"difference between New College West and Rockefeller\") +\n  shade_p_value(obs_diff, direction = \"two-sided\",\n                color = princeton_black, fill = princeton_orange) +\n  theme_minimal(base_size = 16)\n```\n\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n## Conclusion\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution |> get_p_value(obs_diff, direction = \"two-sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1   0.018\n```\n\n\n:::\n:::\n\n\n\n::: {.callout-warning}\n## Some Evidence\n\nSince the p-value < 0.05, we have *reject the null hypothesis* that the flossing frequency is the same for students at New College West and Rockefeller (at the $\\alpha = 0.05$ significance level).\n\nWe may treat this result as having found *some* evidence that there may be a relationship between these two residential colleges and flossing frequency.\n:::\n\n\n# Old Method (t-test)\n\n## Pooled Variance\n\nThe old-fashioned way of computing a two-means hypothesis test was conducted through the $t$-distribution through the *pooled variance*\n\n$$t = \\frac{\\bar{x}_{1} - \\bar{x}_{2}}{\\sqrt{\\frac{s_{p}^{2}}{n_{1}} + \\frac{s_{p}^{2}}{n_{2}}}} \\text{ with } s_{p}^{2} = \\frac{(n_{1}-1)s_{1}^{2} + (n_{2}-1)^{2}s_{2}^{2}}{n_{1} + n_{2} - 2}$$\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_wide <- demo_long |>\n  pivot_wider(names_from = residentialCollege,\n              values_from = flossing,\n              values_fn = list)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nNCW <- unlist(demo_wide$`New College West`)\nRocky <- unlist(demo_wide$Rockefeller)\nxbar1 <- mean(NCW)\nxbar2 <- mean(Rocky)\ns1 <- sd(NCW)\ns2 <- sd(Rocky)\nn1 <- length(NCW)\nn2 <- length(Rocky)\npooled_var <- ((n1 - 1)*s1^2 + (n2-1)*s2^2) / (n1 + n2 - 2)\nt_stat <- (xbar1 - xbar2) / sqrt(pooled_var/n1 + pooled_var/n2)\ncrit_val <- qt(c(0.025, 0.975), df = n1 + n2 - 2)\n```\n:::\n\n\n\n## Comparison\n\n::::: {.panel-tabset}\n\n## plots\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n::: {.callout-important}\n## Critical Region\n\nThat is, in order to *reject* the null hypothesis, we wanted the $t$ statistic to be inside of the critical region.\n:::\n\n## code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- vnorm(crit_val, section = \"tails\") +\n  geom_vline(aes(xintercept = t_stat),\n             color = \"red\", linewidth = 2) +\n  labs(title = \"Critical Region\",\n       subtitle = \"Two-sided hypothesis test\",\n       caption = \"SML 201\",\n       x = \"t distribution\") +\n  scale_x_continuous(breaks = t_stat,\n                     labels = \"t statistic\")\n\np2 <- vnorm(t_stat, section = \"lower\") +\n  geom_vline(aes(xintercept = t_stat),\n             color = \"red\", linewidth = 2) +\n  labs(title = \"p-value\",\n       subtitle = \"Two-sided hypothesis test\",\n       caption = \"SML 201\",\n       x = \"t distribution\") +\n  scale_x_continuous(breaks = t_stat,\n                     labels = \"t statistic\")\n\n# patchwork\np1 / p2\n```\n:::\n\n\n\n:::::\n\n\n## t.test\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(NCW, Rocky, alternative = \"two.sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tWelch Two Sample t-test\n\ndata:  NCW and Rocky\nt = -2.5613, df = 21.1, p-value = 0.01815\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n -5.8556895 -0.6085962\nsample estimates:\nmean of x mean of y \n 3.125000  6.357143 \n```\n\n\n:::\n:::\n\n\n\n::: {.callout-warning}\n## Some Evidence\n\nSince the p-value < 0.05, we have *reject the null hypothesis* that the flossing frequency is the same for students at New College West and Rockefeller (at the $\\alpha = 0.05$ significance level).\n\nWe may treat this result as having found *some* evidence that there may be a relationship between these two residential colleges and flossing frequency.\n:::\n\n\n# Regression Redux\n\nLet us return to linear regression and visit concepts that we skipped before.\n\n## Number of Courses versus Age\n\n::::: {.panel-tabset}\n\n## setup\n\n* response variable: `numCourses` (i.e. number of courses taken before this semester)\n* explanatory variable: `age`\n\n$$\\hat{y} = \\beta_{0} + \\beta_{1}X_{1}$$\n\n## plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n\n## code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_long <- demo_df |>\n  filter(age >= 18 & age <= 21) |>\n  filter(!is.na(numCourses))\n\ndemo_long |>\n  ggplot(aes(x = age, y = numCourses)) +\n  geom_point() +\n  geom_smooth(formula = \"y ~ x\",\n              method = \"lm\",\n              se = TRUE) +\n  labs(title = \"Number of Courses versus Age\",\n       subtitle = \"Is this slope significant?\",\n       caption = \"SML 201\",\n       y = \"number of courses taken\\nbefore this semester\") +\n  theme_minimal(base_size = 14)\n```\n:::\n\n\n\n:::::\n\n## Model Statistics\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlin_fit <- lm(numCourses ~ age, data = demo_long)\nsummary(lin_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = numCourses ~ age, data = demo_long)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-13.6380  -2.7257  -0.7257   2.8181  14.8181 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) -92.9408     8.6081  -10.80   <2e-16 ***\nage           5.4561     0.4408   12.38   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 4.105 on 121 degrees of freedom\nMultiple R-squared:  0.5588,\tAdjusted R-squared:  0.5551 \nF-statistic: 153.2 on 1 and 121 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n:::\n\n\n\n## NHST\n\nFor a regression model, each coefficent is treated as a hypothesis test.\n\n* null hypothesis: coefficient $\\beta_{1}$ *is* zero\n* alternative hypothesis: coefficient $\\beta_{1}$ is nonzero\n\n$$H_{o}: \\beta_{1} = 0$$\n$$H_{a}: \\beta_{1} \\neq 0$$\n\n::: {.callout-warning}\n## Some Evidence\n\nSince the p-value < 0.05, we have *reject the null hypothesis* that the $\\beta_{1}$ coefficient is zero (at the $\\alpha = 0.05$ significance level).\n\nWe may treat this result as having found *some* evidence that there may be a relationship between age and and the number of courses taken.\n:::\n\n\n## GPA versus Shoe Size\n\n::::: {.panel-tabset}\n\n## setup\n\n* response variable: `GPA` \n* explanatory variable: `shoeSize`\n\n$$\\hat{y} = \\beta_{0} + \\beta_{1}X_{1}$$\n\n## plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n\n## code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_long <- demo_df |>\n  filter(GPA > 0 & GPA <= 4.0) |>\n  filter(shoeSize >= 5 & shoeSize <= 20)\n\ndemo_long |>\n  ggplot(aes(x = shoeSize, y = GPA)) +\n  geom_point() +\n  geom_smooth(formula = \"y ~ x\",\n              method = \"lm\",\n              se = TRUE) +\n  labs(title = \"Number of Courses versus Age\",\n       subtitle = \"Is this slope significant?\",\n       caption = \"SML 201\",\n       y = \"number of courses taken\\nbefore this semester\") +\n  theme_minimal(base_size = 14)\n```\n:::\n\n\n\n:::::\n\n## Model Statistics\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlin_fit <- lm(GPA ~ shoeSize, data = demo_long)\nsummary(lin_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = GPA ~ shoeSize, data = demo_long)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.97540 -0.15362  0.03751  0.21608  0.47696 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  3.34304    0.11967  27.935   <2e-16 ***\nshoeSize     0.02582    0.01354   1.907    0.059 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.2943 on 114 degrees of freedom\nMultiple R-squared:  0.03093,\tAdjusted R-squared:  0.02243 \nF-statistic: 3.638 on 1 and 114 DF,  p-value: 0.05898\n```\n\n\n:::\n:::\n\n\n\n::: {.callout-warning}\n## Inconclusive\n\nSince the p-value > 0.05, we have *failed to reject the null hypothesis* that the $\\beta_{1}$ coefficient is zero (at the $\\alpha = 0.05$ significance level).\n\nWe may treat this result as inconclusive or note that we have not found evidence here toward showing a relationship between GPA and shoe size.\n:::\n\n\n# ggsignif\n\n## Significant\n\n::::: {.panel-tabset}\n\n## plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n\n## code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_long <- demo_df |>\n  select(residentialCollege, flossing) |>\n  drop_na()\n\ndemo_long |>\n  ggplot(aes(x = residentialCollege, y = flossing)) +\n  geom_boxplot(color = princeton_black, fill = princeton_orange) +\n  geom_signif(\n    comparisons = list(c(\"New College West\", \"Rockefeller\")),\n    map_signif_level = TRUE,\n    y_position = 10\n  ) +\n  labs(title = \"Does Residential College affect Flossing Frequency?\",\n       subtitle = \"(stars of significance)\",\n       caption = \"SML 201\",\n       x = \"\", y = \"times flossing per week\") +\n  theme_minimal(base_size = 14) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n```\n:::\n\n\n\n:::::\n\n\n\n## Not Significant\n\n::::: {.panel-tabset}\n\n## plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](17_NHST_two_sided_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n\n\n## code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_long <- demo_df |>\n  select(GPA, coffeeTea) |>\n  filter(GPA > 0 & GPA <= 4.0) |>\n  drop_na()\n\ndemo_long |>\n  ggplot(aes(x = coffeeTea, y = GPA)) +\n  geom_boxplot(color = princeton_black, fill = princeton_orange) +\n  geom_signif(\n    comparisons = list(c(\"coffee\", \"tea\")),\n    map_signif_level = TRUE,\n    y_position = 4.2\n    \n  ) +\n  labs(title = \"Does Beverage Choice affect GPA?\",\n       subtitle = \"(stars of significance)\",\n       caption = \"SML 201\",\n       x = \"beverage\", y = \"grade point average\") +\n  scale_y_continuous(limits = c(2.0, 4.5)) +\n  theme_minimal(base_size = 14)\n```\n:::\n\n\n\n:::::\n\n\n\n# Quo Vadimus?\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n* Precept 8\n* Historical Case Studies and Ethics \n* Project 3 (assigned Nov 11)\n* Exam 2 (December 5)\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"50%\"}\n![Yoda knows](Yoda_NHST.png)\n:::\n\n::::\n\n\n# Footnotes\n\n::: {.callout-note collapse=\"true\"}\n## (optional) Additional Resources\n\n* [ggsignif vignette](https://cran.r-project.org/web/packages/ggsignif/vignettes/intro.html)\n\n===\n\nSome students were asking about how to specifically show the endpoints of the confidence interval on the horizontal axis of the histogram that is produced by visualize.  This skill is not required for Precept 8 or other tasks that ask for visualize, but I went ahead and assembled a quick example below.\n\n    1. `scale_x_continuous` to set breaks (locations) and labels\n    2. needed to convert `ci_per` from a tibble to a vector\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"palmerpenguins\")\nbootstrap_distribution <- penguins |>\n  filter(!is.na(body_mass_g)) |>\n  specify(response = body_mass_g) |>\n  generate(reps = 1000, type = \"bootstrap\") |>\n  calculate(stat = \"mean\")\n\nci_per <- bootstrap_distribution |> get_ci(level = 0.95)\nci_vec <- as.vector(unlist(ci_per))\n\nbootstrap_distribution |>\n  visualize() +\n  labs(title = \"Palmer Penguins\",\n       subtitle = \"Confidence Interval for Body Mass\",\n       caption = \"SML 201\",\n       x = \"body mass (grams)\") +\n  scale_x_continuous(breaks = ci_vec, \n                     labels = round(ci_vec, 1)) +\n  shade_ci(ci_per, color = \"black\", fill = \"orange\") +\n  theme_minimal(base_size = 16)\n```\n:::\n\n\n\n\n:::\n\n::: {.callout-note collapse=\"true\"}\n## Session Info\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22631)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] lubridate_1.9.3  forcats_1.0.0    stringr_1.5.1    dplyr_1.1.4     \n [5] purrr_1.0.2      readr_2.1.5      tidyr_1.3.1      tibble_3.2.1    \n [9] ggplot2_3.5.1    tidyverse_2.0.0  patchwork_1.3.0  moderndive_0.7.0\n[13] janitor_2.2.0    infer_1.0.7      ggsignif_0.6.4  \n\nloaded via a namespace (and not attached):\n [1] utf8_1.2.4           generics_0.1.3       lattice_0.22-6      \n [4] stringi_1.8.4        hms_1.1.3            digest_0.6.36       \n [7] magrittr_2.0.3       evaluate_0.24.0      grid_4.4.1          \n[10] timechange_0.3.0     fastmap_1.2.0        Matrix_1.7-0        \n[13] operator.tools_1.6.3 jsonlite_1.8.8       backports_1.5.0     \n[16] mgcv_1.9-1           fansi_1.0.6          scales_1.3.0        \n[19] cli_3.6.3            crayon_1.5.3         rlang_1.1.4         \n[22] splines_4.4.1        bit64_4.0.5          munsell_0.5.1       \n[25] withr_3.0.1          yaml_2.3.10          parallel_4.4.1      \n[28] tools_4.4.1          tzdb_0.4.0           colorspace_2.1-1    \n[31] broom_1.0.6          vctrs_0.6.5          R6_2.5.1            \n[34] lifecycle_1.0.4      snakecase_0.11.1     bit_4.0.5           \n[37] htmlwidgets_1.6.4    vroom_1.6.5          archive_1.1.8       \n[40] pkgconfig_2.0.3      pillar_1.9.0         gtable_0.3.5        \n[43] glue_1.7.0           xfun_0.46            tidyselect_1.2.1    \n[46] rstudioapi_0.16.0    knitr_1.48           farver_2.1.2        \n[49] nlme_3.1-164         htmltools_0.5.8.1    labeling_0.4.3      \n[52] rmarkdown_2.28       formula.tools_1.7.1  compiler_4.4.1      \n```\n\n\n:::\n:::\n\n\n:::\n\n\n::: {.callout-note collapse=\"true\"}\n## Example Callout Block\n\n`note`, `tip`, `warning`, `caution`, or `important`\n:::\n\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\n:::\n\n::::\n\n::::: {.panel-tabset}\n\n\n\n:::::",
    "supporting": [
      "17_NHST_two_sided_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}