{
  "hash": "497cfdd1b65de507f7dee2dfac528d41",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"2: Centrality\"\nauthor: \"Derek Sollberger\"\ndate: \"2026-01-29\"\n# format:\n#   revealjs:\n#     scrollable: true\nformat:\n  html:\n    toc: true\n---\n\n\n::: {.cell}\n\n:::\n\n\n# SML 201\n\n## Start\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n* **Goal**: Summarize data by centrality\n\n* **Objective**: Compute means and medians\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"45%\"}\n![The limit does not exist!](median_girls_meme.png)\n:::\n\n::::\n\n::: {.callout-tip}\n## Advice\n\n* create a folder on your computer desktop called \"SML 201\"\n\n    * later: place all code scripts and data sets in this folder\n    \n* To create a new Quarto document, open RStudio and then\n\n    * `File` --> `New File` --> `Quarto Document ...`\n    * save the file into your `SML 201` folder\n    \n* To run a line of code, the keyboard short cut is\n\n    * Windows: CTRL + ENTER\n    * Mac: CMD + ENTER\n:::\n\n\n# Apertif: Astronomy Tables\n\n:::: {.columns}\n\n::: {.column width=\"30%\"}\n![astronomy table](astronomical_table.png)\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"60%\"}\n* 1580: Uranienborg, observatory in Denmark\n* 1592: Tycho Brahe publishes *Thousand Star Catalog*\n* 1627: Kepler's Laws of Planetary Motion\n:::\n\n::::\n\n\n# Mean\n\n::: {.callout-note}\n## Definition\n\nFor a list of data\n\n$$\\{a_{1}, a_{2}, ..., a_{n}\\}$$\n\nthe **mean** or **average** of the data is defined as\n\n$$\\bar{x} = \\displaystyle\\frac{1}{n}\\sum_{i = 1}^{n} a_{i}$$\nwhere \"x bar\" denotes a **sample mean**\n:::\n\n\n\n## In R\n\nRun each of these lines of code, and describe the code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsome_data <- c(32, 45, 16, 78, 39)\nsum(some_data)\nlength(some_data)\nsum(some_data) / length(some_data)\nmean(some_data)\n```\n:::\n\n\n## Missing Data\n\nRun each of these lines of code, and describe the code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsome_data <- c(32, 45, 16, 78, NA, 39)\nsum(some_data)\nlength(some_data)\nsum(some_data) / length(some_data)\nmean(some_data)\nmean(some_data, na.rm = TRUE)\n```\n:::\n\n\n\n::: {.callout-warning}\n# DCP1\n:::\n\n\n# Case Study: Weights of Olympians\n\n## Loading the Data\n\nI have supplied a couple of data sets to a GitHub repository to ease the loading of data for classroom work.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nolympic_df1 <- readr::read_csv(\"https://raw.githubusercontent.com/dsollberger/sml201slides/main/posts/02_centrality/olympic_data.csv\")\nolympic_df2 <- readr::read_csv(\"https://raw.githubusercontent.com/dsollberger/sml201slides/main/posts/02_centrality/olympic_data2.csv\")\n```\n:::\n\n\n## Summary Statistics\n\nRun each of these lines of code, and describe the code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(olympic_df1$weight)\nmean(olympic_df1$weight, na.rm = TRUE)\n```\n:::\n\n\n::: {.callout-tip collapse=\"true\"}\n## The fix\n\n\n::: {.cell}\n\n```{.r .cell-code}\nolympic_df1$weight[olympic_df1$weight <= 0] <- NA\nolympic_df2$weight[olympic_df2$weight <= 0] <- NA\n```\n:::\n\n\n:::\n\n\n# Case Study: Ages of Olympians\n\n## Filter\n\nFor this demonstration, let us focus on the athletes from Turkey.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTurkey_df1 <- olympic_df1 |>\n  filter(country_code == \"TUR\")\n```\n:::\n\n\n\n## Dotplot\n\nEarly in an introductory statistics course, a **dotplot** is useful for visualizing *integer* data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_1 <- mean(Turkey_df1$age, na.rm = TRUE)\n\nTurkey_df1 |>\n  ggplot(aes(x = age)) +\n  geom_dotplot() +\n  geom_vline(xintercept = mean_1, color = \"blue\", linewidth = 3) +\n  labs(title = \"Ages of Turkish Athletics\",\n       subtitle = \"mean in blue\",\n       caption = \"SML 201\")\n```\n\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## The Outlier\n\n:::: {.columns}\n\n::: {.column width=\"55%\"}\n![Yusuf Dikec](Yusuf_Dikec.png)\n\n* image source: News 18\n:::\n\n::: {.column width=\"5%\"}\n\t\n:::\n\n::: {.column width=\"40%\"}\n* Yusuf Dikec\n* Turkish sharpshooter\n\n    * silver medalist (2024 Olympics)\n    * 10m air pistol mixed team\n\n* Age: 51\n:::\n\n::::\n\n## Filtered Again\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTurkey_df2 <- olympic_df2 |>\n  filter(country_code == \"TUR\")\n```\n:::\n\n\n## Dotplot Revisited\n\nEarly in an introductory statistics course, a **dotplot** is useful for visualizing *integer* data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_1 <- mean(Turkey_df1$age, na.rm = TRUE)\nmean_2 <- mean(Turkey_df2$age, na.rm = TRUE)\n\nTurkey_df2 |>\n  ggplot(aes(x = age)) +\n  geom_dotplot() +\n  geom_vline(xintercept = mean_1, color = \"blue\", linewidth = 3) +\n  geom_vline(xintercept = mean_2, color = \"blue\", linewidth = 3) +\n  labs(title = \"Ages of Turkish Athletics\",\n       subtitle = \"mean in blue\",\n       caption = \"SML 201\")\n```\n\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n# Median\n\nRun each of these lines of code, and describe the code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsome_data <- c(32, 45, 16, 78, 39)\nsort(some_data)\nmedian(some_data)\n\nsome_data2 <- c(32, 45, 16, 78, 39, 5)\nsort(some_data2)\nmedian(some_data2)\n```\n:::\n\n\n::: {.callout-note}\n## Definition\n\nFor a *sorted* list of data\n\n$$\\{a_{(1)}, a_{(2)}, ..., a_{(n)}\\}$$\n\nthe **median** is the value in the middle of the list (splits list into 50 percentile halves).\n\n* If there are an even amount of elements in the data, then the **median** is the *average* of the middle two values.\n:::\n\n## Medians\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmedian_1 <- median(Turkey_df1$age, na.rm = TRUE)\nmedian_2 <- median(Turkey_df2$age, na.rm = TRUE)\n\nTurkey_df2 |>\n  ggplot(aes(x = age)) +\n  geom_dotplot() +\n  geom_vline(xintercept = median_1, color = \"red\", linewidth = 3) +\n  geom_vline(xintercept = median_2, color = \"red\", linewidth = 3) +\n  labs(title = \"Ages of Turkish Athletics\",\n       subtitle = \"median in red\",\n       caption = \"SML 201\")\n```\n\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n# Observed Differences\n\nAs a preview of concepts that we will need later (for hypothesis testing), we can practice computing a **difference in means** and a **difference in medians**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_1 #without outlier\nmean_2 #with outlier\n```\n:::\n\n\n\n:::: {.panel-tabset}\n\n## Difference in Means\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_1 - mean_2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] -1.92449\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nabs(mean_1 - mean_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1.92449\n```\n\n\n:::\n:::\n\n:::\n\n::::\n\n\n## Difference in Medians\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nmedian_1 - median_2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nabs(median_1 - median_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0\n```\n\n\n:::\n:::\n\n:::\n\n::::\n\n\n\n## Punchline\n\n![Invincible](median_robust.png)\n\n* The median is *robust* against outliers!\n* image source: [Know Your Meme](https://knowyourmeme.com/memes/look-what-they-need-to-mimic-a-fraction-of-our-power)\n\n::::\n\n\n\n# Reporting\n\n:::: {.panel-tabset}\n\n## Why the mean?\n\nLater, we use the mean for:\n\n* normal distributions (\"bell curves\")\n* linear regression goes through center of mass\n* estimators and other statistical theory\n\n## Which do we use?\n\n:::: {.columns}\n\n::: {.column width=\"60%\"}\n### When feasible, compute and report both the mean and median.\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"30%\"}\n![Why not both?](why_not_both.png)\n\n* image source: [Know Your Meme](https://knowyourmeme.com/memes/why-not-both-why-dont-we-have-both)\n:::\n\n::::\n\n::::\n\n\n::: {.callout-warning}\n# DCP2\n:::\n\n\n# Side Quest: Median Stack\n\n:::: {.panel-tabset}\n\n## Computer Vision\n\n![RGB matrices](RBG_matrices.png)\n\n* image credit: Ben Mauss\n\n## Outlier Pixels\n\n![Salt and pepper noise](salt_and_pepper_noise.png)\n\n## Align Matrices\n\n![take many still photos](many_shots.png)\n\n## Median Stack Filter\n\n![apply a median!](median_stack_result.png)\n\n* source: [making people disappear from a photo](https://photofocus.com/software/photoshop-magic-making-people-disappear-from-a-scene/)\n\n::::\n\n\n\n# Mode\n\n::: {.callout-warning}\n## No mode function in R?\n\nIt appears that `R` doesn't have a built-in function to compute a statistical mode.\n\nInstead, we will later use `tidyverse` techniques to compute mode(s) of data.\n:::\n\n\n# Segmentation\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(201)\nsegmented_data <- olympic_df2 |>\n  select(country_code, gender, height, age) |>\n  filter(country_code %in% c(\"CAN\", \"MEX\", \"USA\")) |>\n  group_by(country_code) |>\n  mutate(xbar = mean(age, na.rm = TRUE)) |>\n  sample_n(3) |>\n  ungroup()\n```\n:::\n\n\n\n## Data types\n\nIn `R`, we use the `str` command to look at the *structure* of a data frame.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(segmented_data, give.attr = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ntibble [9 Ã— 5] (S3: tbl_df/tbl/data.frame)\n $ country_code: chr [1:9] \"CAN\" \"CAN\" \"CAN\" \"MEX\" ...\n $ gender      : chr [1:9] \"Female\" \"Female\" \"Male\" \"Male\" ...\n $ height      : num [1:9] 0 0 0 0 0 0 0 180 0\n $ age         : num [1:9] 19 22 28 27 31 56 22 32 28\n $ xbar        : num [1:9] 27.2 27.2 27.2 27 27 ...\n```\n\n\n:::\n:::\n\n\nIn this example,\n\n* `country_code` and `gender` may be treated as *categorical data*\n* `height` and `age` may be treated as *numerical data*\n\n\n## Process\n\n**Segmentation** is a **group by** operation followed by an **aggregation**:\n\n* mean\n* median\n* mode\n* minimum\n* maximum\n\n::::: {.panel-tabset}\n\n### group by\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"vyxqfdlvew\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#vyxqfdlvew table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#vyxqfdlvew thead, #vyxqfdlvew tbody, #vyxqfdlvew tfoot, #vyxqfdlvew tr, #vyxqfdlvew td, #vyxqfdlvew th {\n  border-style: none;\n}\n\n#vyxqfdlvew p {\n  margin: 0;\n  padding: 0;\n}\n\n#vyxqfdlvew .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#vyxqfdlvew .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#vyxqfdlvew .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#vyxqfdlvew .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#vyxqfdlvew .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#vyxqfdlvew .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#vyxqfdlvew .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#vyxqfdlvew .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#vyxqfdlvew .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#vyxqfdlvew .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#vyxqfdlvew .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#vyxqfdlvew .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#vyxqfdlvew .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#vyxqfdlvew .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#vyxqfdlvew .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vyxqfdlvew .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#vyxqfdlvew .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#vyxqfdlvew .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#vyxqfdlvew .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vyxqfdlvew .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#vyxqfdlvew .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vyxqfdlvew .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#vyxqfdlvew .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vyxqfdlvew .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vyxqfdlvew .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vyxqfdlvew .gt_left {\n  text-align: left;\n}\n\n#vyxqfdlvew .gt_center {\n  text-align: center;\n}\n\n#vyxqfdlvew .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#vyxqfdlvew .gt_font_normal {\n  font-weight: normal;\n}\n\n#vyxqfdlvew .gt_font_bold {\n  font-weight: bold;\n}\n\n#vyxqfdlvew .gt_font_italic {\n  font-style: italic;\n}\n\n#vyxqfdlvew .gt_super {\n  font-size: 65%;\n}\n\n#vyxqfdlvew .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#vyxqfdlvew .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#vyxqfdlvew .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#vyxqfdlvew .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#vyxqfdlvew .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#vyxqfdlvew .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#vyxqfdlvew .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#vyxqfdlvew .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#vyxqfdlvew div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal\" style>Segmenting Data</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>(3 observations per group shown)</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"country_code\">country_code</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"age\">age</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #D80621;\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">19</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #D80621;\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">22</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #D80621;\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">28</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #006341;\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">27</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #006341;\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">31</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #006341;\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">56</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #0A3161;\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">22</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #0A3161;\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">32</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #0A3161;\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">28</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"2\"> Source: Kaggle, Petro Ivaniuk</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n### gt\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsegmented_data |>\n  select(country_code, age) |>\n  gt() |>\n  cols_align(align = \"center\") |>\n  tab_footnote(footnote = \"Source: Kaggle, Petro Ivaniuk\") |>\n  tab_header(\n    title = \"Segmenting Data\",\n    subtitle = \"(3 observations per group shown)\"\n  ) |>\n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_column_labels()\n  ) |>\n  tab_style(\n    style = list(\n      cell_text(color = \"white\", weight = \"bold\"),\n      cell_fill(color = \"#D80621\")),\n    locations = cells_body(columns = country_code,\n                           rows = country_code == \"CAN\")\n  ) |>\n  tab_style(\n    style = list(\n      cell_text(color = \"white\", weight = \"bold\"),\n      cell_fill(color = \"#006341\")),\n    locations = cells_body(columns = country_code,\n                           rows = country_code == \"MEX\")\n  ) |>\n  tab_style(\n    style = list(\n      cell_text(color = \"white\", weight = \"bold\"),\n      cell_fill(color = \"#0A3161\")),\n    locations = cells_body(columns = country_code,\n                           rows = country_code == \"USA\")\n  )\n```\n:::\n\n\n### mutate\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"wupfgdsuve\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#wupfgdsuve table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#wupfgdsuve thead, #wupfgdsuve tbody, #wupfgdsuve tfoot, #wupfgdsuve tr, #wupfgdsuve td, #wupfgdsuve th {\n  border-style: none;\n}\n\n#wupfgdsuve p {\n  margin: 0;\n  padding: 0;\n}\n\n#wupfgdsuve .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#wupfgdsuve .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wupfgdsuve .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wupfgdsuve .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wupfgdsuve .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wupfgdsuve .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wupfgdsuve .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wupfgdsuve .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wupfgdsuve .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#wupfgdsuve .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#wupfgdsuve .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wupfgdsuve .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wupfgdsuve .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wupfgdsuve .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wupfgdsuve .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wupfgdsuve .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#wupfgdsuve .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#wupfgdsuve .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#wupfgdsuve .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wupfgdsuve .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#wupfgdsuve .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wupfgdsuve .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wupfgdsuve .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wupfgdsuve .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wupfgdsuve .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wupfgdsuve .gt_left {\n  text-align: left;\n}\n\n#wupfgdsuve .gt_center {\n  text-align: center;\n}\n\n#wupfgdsuve .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wupfgdsuve .gt_font_normal {\n  font-weight: normal;\n}\n\n#wupfgdsuve .gt_font_bold {\n  font-weight: bold;\n}\n\n#wupfgdsuve .gt_font_italic {\n  font-style: italic;\n}\n\n#wupfgdsuve .gt_super {\n  font-size: 65%;\n}\n\n#wupfgdsuve .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#wupfgdsuve .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#wupfgdsuve .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#wupfgdsuve .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#wupfgdsuve .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#wupfgdsuve .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#wupfgdsuve .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#wupfgdsuve .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#wupfgdsuve div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal\" style>Segmenting Data</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>(3 observations per group shown)</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"country_code\">country_code</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"age\">age</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"xbar\">xbar</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">19</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">22</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">28</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">27</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">31</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">56</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">22</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">32</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">28</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #121212; background-color: #E77500;\">NA</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"3\"> Source: Kaggle, Petro Ivaniuk</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n### gt\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsegmented_data |>\n  select(country_code, age) |>\n  mutate(xbar = NA) |>\n  gt() |>\n  cols_align(align = \"center\") |>\n  tab_footnote(footnote = \"Source: Kaggle, Petro Ivaniuk\") |>\n  tab_header(\n    title = \"Segmenting Data\",\n    subtitle = \"(3 observations per group shown)\"\n  ) |>\n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_column_labels()\n  ) |>\n  tab_style(\n    style = list(\n      cell_text(color = \"#121212\"),\n      cell_fill(color = \"#E77500\")),\n    locations = cells_body(columns = xbar)\n  )\n```\n:::\n\n\n### aggregation\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"gotozaulvj\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#gotozaulvj table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#gotozaulvj thead, #gotozaulvj tbody, #gotozaulvj tfoot, #gotozaulvj tr, #gotozaulvj td, #gotozaulvj th {\n  border-style: none;\n}\n\n#gotozaulvj p {\n  margin: 0;\n  padding: 0;\n}\n\n#gotozaulvj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#gotozaulvj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#gotozaulvj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#gotozaulvj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#gotozaulvj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#gotozaulvj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#gotozaulvj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#gotozaulvj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#gotozaulvj .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#gotozaulvj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#gotozaulvj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#gotozaulvj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#gotozaulvj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#gotozaulvj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#gotozaulvj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gotozaulvj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#gotozaulvj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#gotozaulvj .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#gotozaulvj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gotozaulvj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#gotozaulvj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gotozaulvj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#gotozaulvj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gotozaulvj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gotozaulvj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gotozaulvj .gt_left {\n  text-align: left;\n}\n\n#gotozaulvj .gt_center {\n  text-align: center;\n}\n\n#gotozaulvj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#gotozaulvj .gt_font_normal {\n  font-weight: normal;\n}\n\n#gotozaulvj .gt_font_bold {\n  font-weight: bold;\n}\n\n#gotozaulvj .gt_font_italic {\n  font-style: italic;\n}\n\n#gotozaulvj .gt_super {\n  font-size: 65%;\n}\n\n#gotozaulvj .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#gotozaulvj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#gotozaulvj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#gotozaulvj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#gotozaulvj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#gotozaulvj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#gotozaulvj .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#gotozaulvj .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#gotozaulvj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal\" style>Segmenting Data</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>(3 observations per group shown)</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"country_code\">country_code</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"age\">age</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"xbar\">xbar</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">19</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #D80621;\">27.18072</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">22</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #D80621;\">27.18072</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">CAN</td>\n<td headers=\"age\" class=\"gt_row gt_center\">28</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #D80621;\">27.18072</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">27</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #006341;\">26.95370</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">31</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #006341;\">26.95370</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">MEX</td>\n<td headers=\"age\" class=\"gt_row gt_center\">56</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #006341;\">26.95370</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">22</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #0A3161;\">26.98869</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">32</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #0A3161;\">26.98869</td></tr>\n    <tr><td headers=\"country_code\" class=\"gt_row gt_center\">USA</td>\n<td headers=\"age\" class=\"gt_row gt_center\">28</td>\n<td headers=\"xbar\" class=\"gt_row gt_center\" style=\"color: #FFFFFF; font-weight: bold; background-color: #0A3161;\">26.98869</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"3\"> Source: Kaggle, Petro Ivaniuk</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n### gt\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsegmented_data |>\n  select(country_code, age, xbar) |>\n  gt() |>\n  cols_align(align = \"center\") |>\n  tab_footnote(footnote = \"Source: Kaggle, Petro Ivaniuk\") |>\n  tab_header(\n    title = \"Segmenting Data\",\n    subtitle = \"(3 observations per group shown)\"\n  ) |>\n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_column_labels()\n  ) |>\n  tab_style(\n    style = list(\n      cell_text(color = \"white\", weight = \"bold\"),\n      cell_fill(color = \"#D80621\")),\n    locations = cells_body(columns = xbar,\n                           rows = country_code == \"CAN\")\n  ) |>\n  tab_style(\n    style = list(\n      cell_text(color = \"white\", weight = \"bold\"),\n      cell_fill(color = \"#006341\")),\n    locations = cells_body(columns = xbar,\n                           rows = country_code == \"MEX\")\n  ) |>\n  tab_style(\n    style = list(\n      cell_text(color = \"white\", weight = \"bold\"),\n      cell_fill(color = \"#0A3161\")),\n    locations = cells_body(columns = xbar,\n                           rows = country_code == \"USA\")\n  )\n```\n:::\n\n\n:::::\n\n\n::: {.callout-warning}\n# DCP3\n:::\n\n\n# Data History: Flint Water Quality\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n* \"exploring lead levels in water samples collected in Flint, Michigan in 2015\"\n* \"samples collected by the Michigan Department of Environment (MDEQ) and data from a citizen science project coordinated by Prof Marc Edwards and colleagues at Virginia Tech\"\n* data hosted at [TidyTuesday](https://github.com/rfordatascience/tidytuesday/blob/main/data/2025/2025-11-04/readme.md), curated by Jen Richmond\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n![Marc Edwards and LeeAnne Walters, pictured during a House Oversight and Government Reform Committee hearing](m_sign_14_2_16_gra-3.png)\n\n* as described in *Significance* magazine, [Volume 14, Issue 2, April 2017](https://academic.oup.com/jrssig/article/14/2/16/7029247?login=false)\n:::\n\n::::\n\n## Summary statistics\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmu1_mdeq <- mean(flint_mdeq$lead, na.rm = TRUE)\nmu2_mdeq <- mean(flint_mdeq$lead2, na.rm = TRUE)\nmu_vt <- mean(flint_vt$lead, na.rm = TRUE)\n\ntop10_1_mdeq <- quantile(flint_mdeq$lead, 0.90, na.rm = TRUE)\ntop10_2_mdeq <- quantile(flint_mdeq$lead2, 0.90, na.rm = TRUE)\ntop10_vt <- quantile(flint_vt$lead, 0.90, na.rm = TRUE)\n```\n:::\n\n\n### All MDEQ Samples\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(flint_mdeq$lead)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   0.00    2.00    3.00    7.31    6.50  104.00 \n```\n\n\n:::\n:::\n\n\n### Outliers Removed\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(flint_mdeq$lead2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n  0.000   2.000   3.000   5.725   6.000  42.000       2 \n```\n\n\n:::\n:::\n\n\n### Independent Test\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(flint_vt$lead)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  0.344   1.578   3.521  10.646   9.050 158.000 \n```\n\n\n:::\n:::\n\n\n## Histograms\n\n:::: {.panel-tabset}\n\n### All MDEQ Samples\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint_mdeq |>\n  ggplot() +\n  geom_histogram(aes(x = lead),\n                 binwidth = 5, color = \"black\", fill = \"gray75\") +\n  geom_vline(xintercept = mu1_mdeq, color = \"blue\", \n             linetype = 2, linewidth = 2) +\n  geom_vline(xintercept = top10_1_mdeq, color = \"red\", \n             linetype = 2, linewidth = 2) +\n  labs(title = \"Flint Water Samples in 2015\",\n       subtitle = \"MDEQ measurements (average in blue, top 10 percentile in red)\",\n       caption = \"Source: Jen Richmond\",\n       x = \"lead (ppb)\", y = \"number of samples\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\n### Outliers Removed\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint_mdeq |>\n  ggplot() +\n  geom_histogram(aes(x = lead2),\n                 binwidth = 5, color = \"black\", fill = \"gray75\") +\n  geom_vline(xintercept = mu1_mdeq, color = \"blue\", \n             linetype = 2, linewidth = 2) +\n  geom_vline(xintercept = top10_2_mdeq, color = \"red\", \n             linetype = 2, linewidth = 2) +\n  labs(title = \"Flint Water Samples in 2015\",\n       subtitle = \"MDEQ measurements, two samples missing (average in blue, top 10 percentile in red)\",\n       caption = \"Source: Jen Richmond\",\n       x = \"lead (ppb)\", y = \"number of samples\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite outside the scale range\n(`stat_bin()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n### Independent Test\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflint_vt |>\n  ggplot() +\n  geom_histogram(aes(x = lead),\n                 binwidth = 5, color = \"black\", fill = \"gray75\") +\n  geom_vline(xintercept = mu1_mdeq, color = \"blue\", \n             linetype = 2, linewidth = 2) +\n  geom_vline(xintercept = top10_vt, color = \"red\", \n             linetype = 2, linewidth = 2) +\n  labs(title = \"Flint Water Samples in 2015\",\n       subtitle = \"VT measurements (average in blue, top 10 percentile in red)\",\n       caption = \"Source: Jen Richmond\",\n       x = \"lead (ppb)\", y = \"number of samples\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n::::\n\n\n\n\n## Diagnoses\n\n\"the Lead and Copper Rule (LCR) of 1991 is 15 parts per billion (ppb). If this is exceeded in more than 10% of homes tested (or if the 90th percentile value of the total sample is above 15 ppb), action is required.\" --- [Significance, Vol 14, Issue 2](https://academic.oup.com/jrssig/article/14/2/16/7029247?login=false)\n\n### All MDEQ Samples\n\n\n::: {.cell}\n\n```{.r .cell-code}\nifelse(quantile(flint_mdeq$lead, 0.90, na.rm = TRUE) > 15,\n       \"action required\", \"safe water\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n              90% \n\"action required\" \n```\n\n\n:::\n:::\n\n\n### Outliers Removed\n\n\n::: {.cell}\n\n```{.r .cell-code}\nifelse(quantile(flint_mdeq$lead2, 0.90, na.rm = TRUE) > 15,\n       \"action required\", \"safe water\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n         90% \n\"safe water\" \n```\n\n\n:::\n:::\n\n\n### Independent Test\n\n\n::: {.cell}\n\n```{.r .cell-code}\nifelse(quantile(flint_vt$lead, 0.90, na.rm = TRUE) > 15,\n       \"action required\", \"safe water\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n              90% \n\"action required\" \n```\n\n\n:::\n:::\n\n\n# Coda\n\n::: {.callout-note}\n\n## Do we remove outliers?\n\n* We should not automatically remove outliers\n* Deciding on removing outliers is very context dependent.\n\n:::\n\n# Quo Vadimus?\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n* Please read the weekly announcement in Canvas\n* Due this Friday:\n\n    * Software Installation\n    * Precept 1\n    * CLO Assessment\n    * Demographics Survey\n    \n* Project 1:\n\n    * assigned: Feb 9\n    * due: Feb 24\n    \n* Exam 1: Mar 5\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n![](statistics_rhyme.png)\n:::\n\n::::\n\n\n# Footnotes\n\n::: {.callout-note collapse=\"true\"}\n## (optional) How the data set was altered\n\nI altered the following `olympics_data.csv` to make classroom demonstrations.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nQ <- readr::read_csv(\"athletes.csv\")\nQ$weight[Q$weight <=0] <- -99 #imitate old-fashioned missing value recording\nQ$age <- lubridate::year(\"2024-07-26\") - lubridate::year(Q$birth_date)\nW <- Q |> dplyr::filter(age <= 30)\nreadr::write_csv(Q, \"olympic_data2.csv\")\nreadr::write_csv(W, \"olympic_data.csv\")\n```\n:::\n\n\n:::\n\n::: {.callout-note collapse=\"true\"}\n\n## (optional) Additional Resources\n\n* great explanation of a [moving average](https://www.ablebits.com/office-addins-blog/moving-average-excel/)\n\n:::\n\n## Application (optional): Rolling Mean\n\n:::: {.panel-tabset}\n\n### Data \n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n* source: [TidyTuesday](https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-12-03) (2019-12-03)\n\n* [Open Data Philly](https://opendataphilly.org/datasets/parking-violations/)\n\n    * filtered to year 2017 data that had latitude/longitude\t\n    \n* objective: summarize trends in ticketing\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n![Philadelphia Parking Authority](PPA.png)\n\n* image source: Matt Rourke/AP Photo\n:::\n\n::::\n\n### Wrangling\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# i.e. started with a very large data set\n# and needed to pare it down\ntickets_raw <- readr::read_csv(\"tickets.csv\")\ntickets_days <- tickets_raw |>\n  separate(issue_datetime, sep = \" \",\n           into = c(\"date\", \"time\")) |>\n  group_by(date) |>\n  count(date) |>\n  ungroup() |>\n  select(date, n)\nreadr::write_csv(tickets_days, \"tickets_days.csv\")\n\ntickets_df <- readr::read_csv(\"tickets_days.csv\")\n```\n:::\n\n\n\n::::\n\n### Time Series\n\n:::: {.panel-tabset}\n\n### Viz\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-38-1.png){width=672}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntickets_df |>\n  ggplot(aes(x = date, y = n)) +\n  geom_line() +\n  labs(title = \"Parking Tickets in Philadelphia\",\n       subtitle = \"Street Sweeping Violations (2017)\",\n       caption = \"Source: Open Data Philly\",\n       y = \"number of tickets\") +\n  theme_minimal()\n```\n:::\n\n\n::::\n\n### Moving Average\n\n:::: {.panel-tabset}\n\n### Concept\n\nA **rolling mean** or **moving average** compues the mean across a group of $L$ (lag) consecutive data points in a time series and slides the \"window\".\n\n### 3\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-40-1.png){width=672}\n:::\n:::\n\n\n### 5\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-41-1.png){width=672}\n:::\n:::\n\n\n### 7\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-42-1.png){width=672}\n:::\n:::\n\n\n### 9\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-43-1.png){width=672}\n:::\n:::\n\n\n### 11\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-44-1.png){width=672}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntickets_df |>\n  mutate(roll_mean = zoo::rollapply(\n    n, 3, mean, align = 'left', fill = NA\n  )) |>\n    ggplot() +\n    geom_point(aes(x = date, y = n),\n               color = \"black\") +\n  geom_line(aes(x = date, y = roll_mean),\n            color = \"blue\") +\n    labs(title = \"Parking Tickets in Philadelphia\",\n         subtitle = \"Rolling mean in blue (n = 3 day window)\",\n         caption = \"Source: Open Data Philly\",\n         y = \"number of tickets\") +\n    theme_minimal()\n```\n:::\n\n\n::::\n\n### Rolling Median\n\n:::: {.panel-tabset}\n\n### 3\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-46-1.png){width=672}\n:::\n:::\n\n\n### 5\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-47-1.png){width=672}\n:::\n:::\n\n\n### 7\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-48-1.png){width=672}\n:::\n:::\n\n\n### 9\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-49-1.png){width=672}\n:::\n:::\n\n\n### 11\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](02_Centrality_files/figure-html/unnamed-chunk-50-1.png){width=672}\n:::\n:::\n\n\n### Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntickets_df |>\n  mutate(roll_median = zoo::rollapply(\n    n, 3, median, align = 'left', fill = NA\n  )) |>\n    ggplot() +\n    geom_point(aes(x = date, y = n),\n               color = \"black\") +\n  geom_line(aes(x = date, y = roll_median),\n            color = \"red\") +\n    labs(title = \"Parking Tickets in Philadelphia\",\n         subtitle = \"Rolling median in red (n = 3 day window)\",\n         caption = \"Source: Open Data Philly\",\n         y = \"number of tickets\") +\n    theme_minimal()\n```\n:::\n\n\n::::\n\n::: {.callout-note collapse=\"true\"}\n## Session Info\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.5.2 (2025-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 10 x64 (build 19045)\n\nMatrix products: default\n  LAPACK version 3.12.1\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] zoo_1.8-14      lubridate_1.9.4 forcats_1.0.0   stringr_1.5.1  \n [5] dplyr_1.1.4     purrr_1.1.0     readr_2.1.5     tidyr_1.3.1    \n [9] tibble_3.3.0    ggplot2_4.0.0   tidyverse_2.0.0 gt_1.0.0       \n\nloaded via a namespace (and not attached):\n [1] sass_0.4.10        generics_0.1.4     xml2_1.3.8         stringi_1.8.7     \n [5] lattice_0.22-7     hms_1.1.3          digest_0.6.37      magrittr_2.0.3    \n [9] evaluate_1.0.4     grid_4.5.2         timechange_0.3.0   RColorBrewer_1.1-3\n[13] fastmap_1.2.0      jsonlite_2.0.0     scales_1.4.0       cli_3.6.5         \n[17] rlang_1.1.6        crayon_1.5.3       bit64_4.6.0-1      withr_3.0.2       \n[21] yaml_2.3.10        tools_4.5.2        parallel_4.5.2     tzdb_0.5.0        \n[25] curl_6.4.0         vctrs_0.6.5        R6_2.6.1           lifecycle_1.0.4   \n[29] htmlwidgets_1.6.4  bit_4.6.0          vroom_1.6.5        pkgconfig_2.0.3   \n[33] pillar_1.11.0      gtable_0.3.6       glue_1.8.0         xfun_0.52         \n[37] tidyselect_1.2.1   rstudioapi_0.17.1  knitr_1.50         farver_2.1.2      \n[41] htmltools_0.5.8.1  rmarkdown_2.29     labeling_0.4.3     compiler_4.5.2    \n[45] S7_0.2.0          \n```\n\n\n:::\n:::\n\n:::\n\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\n:::\n\n::::\n\n::::: {.panel-tabset}\n\n\n\n:::::",
    "supporting": [
      "02_Centrality_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}